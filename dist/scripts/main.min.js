function loadData(e,o,t){"use strict";var a=e.replace(/ /g,"_"),n="https://en.wikipedia.org/w/api.php?action=opensearch&format=json&search="+a+"&limit=1&redirects=resolve",i=setTimeout(function(){return!1},5e3);$.ajax({url:n,dataType:"jsonp",success:function(e){console.log("We succeed at the AJAX call"),clearTimeout(i);var a=e[1].length;if(a){var n='<h4><a href="'+e[3][0]+'">'+e[1][0]+"</a></h4>";console.log("alledgedly pushing a value"),o.infoWindowsContent.push(n),o.infoWindows[t].setContent(n),console.log(o.infoWindowsContent())}1>a&&(console.log("we fail to find an article"),o.infoWindowsContent.push(mapManager.markers.content),o.infoWindows[t].setContent(mapManager.markers.content))}})}function initMap(){"use strict";var e={lat:43.657899,lng:-79.3782433};mapManager.map=new google.maps.Map(document.getElementById("map"),{center:e,scrollwheel:!0,zoom:12,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_CENTER}}),tmvm.addMarkers()}function initMap(){"use strict";var e={lat:43.657899,lng:-79.3782433};mapManager.map=new google.maps.Map(document.getElementById("map"),{center:e,scrollwheel:!0,zoom:12,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_CENTER}}),tmvm.addMarkers()}var ko=ko||{},google=google||{},mapManager=mapManager||{},TheatreMapViewModel=function(){"use strict";var e=this;e.searchText=ko.observable(""),e.markers=ko.observableArray([]),e.infoWindows=[],e.infoWindowsContent=ko.observableArray([]);var o,t=function(o,t){e.markers()[o].addListener("click",function(){e.infoWindows.forEach(function(e,o,t){e.close()}),t.open(mapManager.map,e.markers()[o]),console.log("Good job, you clicked on "+e.markers()[o].title)})};e.printSomething=function(){console.log(e.infoWindowsContent())},e.addMarkers=function(){mapManager.markers.forEach(function(a,n,i){e.markers.push(new google.maps.Marker({position:a.position,map:mapManager.map,title:a.title})),loadData(a.title,e,n),o=new google.maps.InfoWindow({content:"",maxWidth:150}),e.infoWindows.push(o),t(n,o)})}},tmvm=new TheatreMapViewModel;ko.applyBindings(tmvm);var google=google||{},tmvm=tmvm||{},mapManager={markers:[{position:{lat:43.663346,lng:-79.383107},title:"Buddies in Bad Times Theatre"},{position:{lat:43.674842,lng:-79.41282},title:"Tarragon Theatre"},{position:{lat:43.648553,lng:-79.402584},title:"Theatre Passe Muraille"},{position:{lat:43.645531,lng:-79.40269},title:"Factory Theatre"}]},google=google||{},tmvm=tmvm||{},mapManager={markers:[{position:{lat:43.663346,lng:-79.383107},title:"Buddies in Bad Times Theatre",content:"Buddies in Bad Times Theatre. This is an obnoxiously long message. Let's see how it gets handled in the little window."},{position:{lat:43.674842,lng:-79.41282},title:"Tarragon Theatre",content:"Tarragon Theatre"},{position:{lat:43.648553,lng:-79.402584},title:"Theatre Passe Muraille",content:"Theatre Passe Muraille"},{position:{lat:43.645531,lng:-79.40269},title:"Factory Theatre",content:"Factory Theatre"}]};