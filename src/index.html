<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta name="description" content="Theatre in Toronto">
    <meta name="author" content="Andrei Borissenko">
    <title>Toronto Live Theatre Resource</title>
    <link href="dist/perm/bootstrap.min.css" rel="stylesheet">
    <link href="dist/styles/print.min.css" rel="stylesheet" media="print">
    <link href="dist/styles/main.min.css" rel="stylesheet">
</head>

<body>
    <div id="info-div" class="left-divs left-div-off">
        <div id="info-box" data-bind="html: currentDisplay"></div>
        <button data-bind=" click: closeLeftDiv">Dismiss</button>
        <button data-bind=" click: closeMarkerInfo">Dismiss Marker</button>
    </div>
    <div id="map">
    </div>
    <!-- The following three images are all on top of one another and are revealed
        by changing the opacity through JavaScript. -->
    <img id="list-tab" class="tab-plain tab-off list-tab-image" src="dist/images/list-tab.png"></img>
    <img id="list-tab-highlight" class="tab-highlight tab-off list-tab-image" src="dist/images/list-tab-highlight.png"></img>
    <img id="list-tab-back" class="tab-back tab-off list-tab-image" data-bind="click: slideList" src="dist/images/tab-back.png"></img>
    <!-- This div lists all the theatres by name. -->
    <div id="list-div" class="right-divs right-div-off">
        <!-- These buttons allow sorting the theatres alphabetically or by date
            founded. -->
        <div class="button-flex">
            <div href="" class="button-50 button-red" data-bind="click: sortListAlpha">
                Alphabetical
                <!-- The spans become visible when a sort method is selected 
                    and indicate which direction the sort is performed in using
                    up and down arrows. -->
                <span class="no-border" data-bind="visible: currentSort() === 'alpha'">&dArr;</span>
                <span class="no-border" data-bind="visible: currentSort() === 'alpha-reverse'">&uArr;</span>
            </div>
            <div href="" class="button-50 button-green" data-bind="click: sortListFounding">
                Date Founded
                <span class="no-border" data-bind="visible: currentSort() === 'date'">&dArr;</span>
                <span class="no-border" data-bind="visible: currentSort() === 'date-reverse'">&uArr;</span>
            </div>
        </div>
        <!-- Use Knockout to list each item in the markers array. -->
        <ul class="button-list-flex scroll-div" data-bind="foreach: markers">
            <!-- Each item becomes a button that accesses the corresponding marker.
                A list item is 'visible' if it it not being filtered through the 
                controls in the filter-div below. -->
            <li class="button-list-item" data-bind="visible: listed, click: $root.accessMarker">
                <h4 class="bolded-text list-title" data-bind="text: title"></h4>
                <p class="text-center">Date founded:
                    <span class="bump-size bolded-text" data-bind="text: founded"></span></p>
            </li>
        </ul>
    </div>
    <!-- Tabs work just like for the list-tabs above. -->
    <img id="twitter-tab" class="tab-plain tab-off twitter-tab-image" src="dist/images/twitter-tab.png"></img>
    <img id="twitter-tab-highlight" class="tab-highlight tab-off twitter-tab-image" src="dist/images/twitter-tab-highlight.png"></img>
    <img id="twitter-tab-back" class="tab-back tab-off twitter-tab-image" data-bind="click: slideTwitter" src="dist/images/tab-back.png"></img>
    <!-- This div features Twitter feed either from a list of all the theatres
        referenced in the app, or from one particular company. -->
    <div id="twitter-div" class="right-div-off right-divs">
        <!-- These buttons allow switches between the list and user feeds, and 
            between keeping the feed short or allowing Twitter to do a true feed
            with virtually endless tweets acccessed by scrolling down. -->
        <div class="button-flex">
            <div id="twitter-list-button" class="button-50 button-blue" data-bind=" click: switchTwitter">
                <!-- Text changes depending on whether a single account or the 
                    list of all accounts is being viewed. -->
                <span class="no-border" data-bind="visible: twitterListView">
                See Chosen Feed
                </span>
                <span class="no-border" data-bind="visible: !twitterListView()">
                See Combined Feed
                </span>
            </div>
            <div class="button-50 button-pink" data-bind="click: toggleTwitterLength">
                <!-- Text changes depending on the current state of the feed length -->
                <span class="no-border" data-bind="visible: twitterLong">
                Collapse Feed
                </span>
                <span class="no-border" data-bind="visible: !twitterLong()">
                Expand Feed
                </span>
            </div>
        </div>
        <!-- List view -->
        <div id="twitter-list" class="scroll-div" data-bind="visible: twitterListView() && twitterIsOpen">
        </div>
        <!-- Reference to which account we are on for user-view -->
        <div id="twitter-account-header" data-bind="text: currentTitle, visible: !twitterListView() && twitterIsOpen"></div>
        <!-- User view -->
        <div id="twitter-account" class="scroll-div" data-bind="visible: !twitterListView() && twitterIsOpen">
        </div>
        <!-- Error appears behind the other divs and will display 1.5 seconds
            after switching views or feed lengths if there is some problem in 
            loading the feeds. -->
        <div id="twitter-error" class="scroll-div">
            <!-- User view error message -->
            <div data-bind="visible: !twitterListView() && twitterIsOpen">
                <span class="large-font">Hmmm!</span> We're trying to load the Twitter feed for the account <span class="italic-font" data-bind="text: activeTwitter"></span>. If this message persists, try clicking on another marker on the map to reload. If this fails, there might be some error in the connection!
            </div>
            <!-- List view error message -->
            <div data-bind="visible: twitterListView() && twitterIsOpen">
                <span class="large-font">Hmmm!</span> We're trying to load a list of Twitter accounts connected to Toronto Theatre. If this message persists, there might be some issue connecting to Twitter. Sorry for the inconvenience. You can check out the list on the Twitter webpage <a href="https://twitter.com/BreathMachine/lists/toronto-theatre">by clicking here</a>.
            </div>
        </div>
    </div>
    <!-- Tabs work like the list and twitter tabs above. -->
    <img id="filter-tab" class="tab-plain tab-off filter-tab-image" src="dist/images/filter-tab.png"></img>
    <img id="filter-tab-highlight" class="tab-highlight tab-off filter-tab-image" src="dist/images/filter-tab-highlight.png"></img>
    <img id="filter-tab-back" class="tab-back tab-off filter-tab-image" data-bind="click: slideFilter" src="dist/images/tab-back.png"></img>
    <!-- This div features buttons to filter the theatres presented based on 
        interests. -->
    <div id="filter-div" class="right-div-off right-divs">
        <!-- Reset filters -->
        <div class="button-flex">
            <div class="button-100 button-gold" data-bind=" click: clearFilters">
                Uncheck all
            </div>
        </div>
        <!-- All filter options -->
        <ul class="button-filter-flex scroll-div" data-bind="foreach: filters">
            <li class="button-filter-item" data-bind="click: $root.toggleFilter,
            text: flag, css: { buttonOn: filter() }"> 
            <!-- We apply the buttonOn class when the observable 'filter' is
                'true' -->
            </li>
        </ul>
    </div>
    <script src="https://platform.twitter.com/widgets.js"></script>
    <script type="text/javascript" src="dist/perm/jquery-1.12.0.min.js"></script>
    <script async type="text/javascript" src="dist/perm/bootstrap.min.js"></script>
    <script type='text/javascript' src='dist/perm/knockout-3.4.0.js'></script>
    <script type="text/javascript" src="src/scripts/mapmanager.js"></script>
    <script type="text/javascript" src="src/scripts/utilities.js"></script>
    <script type="text/javascript" src="src/scripts/app.js"></script>
    <!--<script type="text/javascript" src="dist/scripts/main.min.js"></script> -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCQCl1KRNkAF-BPdyKyO92M0d4vd6MOd0w&callback=mapManager.initMap&region=CA">
    </script>
</body>

</html>
